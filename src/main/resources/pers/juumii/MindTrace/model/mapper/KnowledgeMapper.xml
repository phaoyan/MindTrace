<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pers.juumii.MindTrace.model.mapper.KnowledgeMapper">

    <resultMap id="resultMap" type="Knowledge">
        <id column="id" property="id"/>
        <result column="description" property="desc"/>
        <result column="mastery_max" property="masteryMax"/>
        <result column="mastery_min" property="masteryMin"/>
        <result column="super_knowledge_id" property="superKnowledgeId"/>
    </resultMap>

    <insert id="insert">
        insert into knowledge (id, description, super_knowledge_id, mastery_max, mastery_min)
        values(#{data.id}, #{data.desc}, #{data.superKnowledgeId}, #{data.masteryMax}, #{data.masteryMin});
    </insert>
    <update id="update">
        update knowledge set
        description = #{data.desc},
        super_knowledge_id = #{data.superKnowledgeId},
        mastery_min = #{data.masteryMin},
        mastery_max = #{data.masteryMax},
        id = #{data.id}
        where id = #{data.id}
    </update>
    <delete id="deleteById">
        delete from knowledge where id = #{id}
    </delete>
    <select id="queryById" resultMap="resultMap">
        select * from knowledge where id = #{id}
    </select>
    <select id="queryAll" resultMap="resultMap">
        select * from knowledge
    </select>
    <select id="queryBySuperKnowledgeId" resultType="pers.juumii.MindTrace.model.data.Knowledge">
        select * from knowledge where super_knowledge_id = #{superKnowledgeId}
    </select>
</mapper>